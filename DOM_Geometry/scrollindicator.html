<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Page Percentage Scrolled</title>
    <style>
      body {
        height: 3000px;
        background-color: aliceblue;
      }
      #percentage {
        height: 4px;
        border-radius: 10px;
        background-color: aqua;
        width: 0%;
        position: fixed;
        top: 0;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div id="percentage"></div>
  </body>
  <script>
    function calculatePercentage() {
      //get document scrollheight i.e total height of the document
      let scrollHeight = Math.max(
        document.body.scrollHeight, //used to get scrooll height in Safari
        document.body.offsetHeight,
        document.documentElement.clientHeight, //majorly valid over most browsers
        document.documentElement.scrollHeight,
        document.documentElement.offsetHeight
      );

      //get the scolled part of document using window.pageYOffset
      let scrolled = window.pageYOffset;
      console.log(scrollHeight, scrolled);

      //calculate percentage
      //   scrolled can at max become equal to (scrollHeight - document.documentElement.clientHeight)
      window.percentage.style.width =
        (scrolled / (scrollHeight - document.documentElement.clientHeight)) *
          100 +
        "%";
    }

    document.addEventListener("scroll", calculatePercentage);
  </script>
</html>
